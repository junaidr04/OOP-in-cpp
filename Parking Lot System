#include <bits/stdc++.h>
using namespace std;

// =================== VEHICLE BASE CLASS ===================
class Vehicle
{
protected:
    int id;
    string brand;
    double rentPerHr;
    bool avail;

public:
    Vehicle(int id, string brand, double rent)
        : id(id), brand(brand), rentPerHr(rent), avail(true) {}

    virtual void info() const = 0;

    int getId() const
    {
        return id;
    }
    bool isAvailable() const
    {
        return avail;
    }

    double calRent(int hour) const
    {
        return rentPerHr * hour;
    }

    void rentVehicle()
    {
        avail = false;
    }
    void returnVehicle()
    {
        avail = true;
    }

    virtual ~Vehicle() {}
};

// =================== VEHICLE TYPES ===================
class Car : public Vehicle
{
public:
    Car(int id, string brand, double rent) : Vehicle(id, brand, rent) {}
    void info() const override
    {
        cout << "Car - ID: " << id << ", Brand: " << brand
             << ", Rent/Hr: " << rentPerHr
             << ", Status: " << (avail ? "Available" : "Rented") << endl;
    }
};

class Bike : public Vehicle
{
public:
    Bike(int id, string brand, double rent) : Vehicle(id, brand, rent) {}
    void info() const override
    {
        cout << "Bike - ID: " << id << ", Brand: " << brand
             << ", Rent/Hr: " << rentPerHr
             << ", Status: " << (avail ? "Available" : "Rented") << endl;
    }
};

class Bus : public Vehicle
{
public:
    Bus(int id, string brand, double rent) : Vehicle(id, brand, rent) {}
    void info() const override
    {
        cout << "Bus - ID: " << id << ", Brand: " << brand
             << ", Rent/Hr: " << rentPerHr
             << ", Status: " << (avail ? "Available" : "Rented") << endl;
    }
};

class Truck : public Vehicle
{
public:
    Truck(int id, string brand, double rent) : Vehicle(id, brand, rent) {}
    void info() const override
    {
        cout << "Truck - ID: " << id << ", Brand: " << brand
             << ", Rent/Hr: " << rentPerHr
             << ", Status: " << (avail ? "Available" : "Rented") << endl;
    }
};

// =================== VEHICLE MANAGER ===================
class VehicleManager
{
    vector<Vehicle*> vehicles;

public:
    void addVehicle(Vehicle* v)
    {
        vehicles.push_back(v);
    }

    Vehicle* findById(int id)
    {
        for (auto v : vehicles)
            if (v->getId() == id) return v;
        return nullptr;
    }

    void showAllVehicles() const
    {
        for (auto v : vehicles)
            v->info();
    }

    ~VehicleManager()
    {
        for (auto v : vehicles)
            delete v;
    }
};

// =================== PARKING SLOT ===================
class ParkingSlot
{
    int slotNumber;
    bool occupied;
    Vehicle* vehicle;

public:
    ParkingSlot(int num) : slotNumber(num), occupied(false), vehicle(nullptr) {}

    bool isFree() const
    {
        return !occupied;
    }

    void park(Vehicle* v)
    {
        vehicle = v;
        occupied = true;
        v->rentVehicle();
    }

    void removeVehicle()
    {
        if (vehicle)
            vehicle->returnVehicle();
        vehicle = nullptr;
        occupied = false;
    }

    Vehicle* getVehicle() const
    {
        return vehicle;
    }

    void showStatus() const
    {
        if (occupied)
            cout << "Slot " << slotNumber << " -> Vehicle ID " << vehicle->getId() << " is parked.\n";
        else
            cout << "Slot " << slotNumber << " -> Empty\n";
    }
};

// =================== PARKING LOT ===================
class ParkingLot
{
    vector<ParkingSlot> carSlots;
    vector<ParkingSlot> bikeSlots;
    vector<ParkingSlot> busSlots;
    vector<ParkingSlot> truckSlots;

public:
    ParkingLot()
    {
        for (int i = 1; i <= 10; i++)
        {
            carSlots.push_back(ParkingSlot(i));
            bikeSlots.push_back(ParkingSlot(i));
            busSlots.push_back(ParkingSlot(i));
            truckSlots.push_back(ParkingSlot(i));
        }
    }

    void parkVehicle(Vehicle* v, const string& type)
    {
        vector<ParkingSlot>* slots = nullptr;

        if (type == "car") slots = &carSlots;
        else if (type == "bike") slots = &bikeSlots;
        else if (type == "bus") slots = &busSlots;
        else if (type == "truck") slots = &truckSlots;
        else
        {
            cout << "Invalid vehicle type.\n";
            return;
        }

        for (auto &slot : *slots)
        {
            if (slot.isFree())
            {
                slot.park(v);
                cout << type << " parked in slot " << &slot - &(*slots)[0] + 1 << ".\n";
                return;
            }
        }
        cout << "No slot available for " << type << ".\n";
    }

    void removeVehicleFromSlot(Vehicle* v, const string& type)
    {
        vector<ParkingSlot>* slots = nullptr;

        if (type == "car") slots = &carSlots;
        else if (type == "bike") slots = &bikeSlots;
        else if (type == "bus") slots = &busSlots;
        else if (type == "truck") slots = &truckSlots;
        else
        {
            cout << "Invalid vehicle type.\n";
            return;
        }

        for (auto &slot : *slots)
        {
            if (!slot.isFree() && slot.getVehicle() == v)
            {
                slot.removeVehicle();
                cout << type << " removed from parking.\n";
                return;
            }
        }
        cout << "Vehicle not found in parking.\n";
    }

    void showAllSlots()
    {
        cout << "\n--- CAR SLOTS ---\n";
        for (auto &s : carSlots) s.showStatus();

        cout << "\n--- BIKE SLOTS ---\n";
        for (auto &s : bikeSlots) s.showStatus();

        cout << "\n--- BUS SLOTS ---\n";
        for (auto &s : busSlots) s.showStatus();

        cout << "\n--- TRUCK SLOTS ---\n";
        for (auto &s : truckSlots) s.showStatus();
    }
};

// =================== MAIN ===================
int main()
{
    VehicleManager vm;
    ParkingLot lot;

    // Create vehicles
    vm.addVehicle(new Car(1, "Toyota", 50));
    vm.addVehicle(new Car(2, "Honda", 40));
    vm.addVehicle(new Bike(3, "Yamaha", 20));
    vm.addVehicle(new Bus(4, "Volvo", 100));
    vm.addVehicle(new Truck(5, "Tata", 120));

    int choice;
    while (true)
    {
        cout << "\n===== VEHICLE PARKING MENU =====\n";
        cout << "1. Show all vehicles\n";
        cout << "2. Park a vehicle\n";
        cout << "3. Remove a vehicle from parking\n";
        cout << "4. Show parking slots\n";
        cout << "5. Exit\n";
        cout << "Choice: ";
        cin >> choice;

        if (choice == 1)
        {
            vm.showAllVehicles();
        }
        else if (choice == 2)
        {
            int vid;
            string type;
            cout << "Enter Vehicle ID to park: ";
            cin >> vid;
            cout << "Enter Vehicle Type (car/bike/bus/truck): ";
            cin >> type;
            Vehicle* v = vm.findById(vid);
            if (!v)
                cout << "Vehicle ID not found!\n";
            else if (!v->isAvailable())
                cout << "Vehicle already rented!\n";
            else
                lot.parkVehicle(v, type);
        }
        else if (choice == 3)
        {
            int vid;
            string type;
            cout << "Enter Vehicle ID to remove: ";
            cin >> vid;
            cout << "Enter Vehicle Type (car/bike/bus/truck): ";
            cin >> type;
            Vehicle* v = vm.findById(vid);
            if (!v)
                cout << "Vehicle ID not found!\n";
            else
                lot.removeVehicleFromSlot(v, type);
        }
        else if (choice == 4)
        {
            lot.showAllSlots();
        }
        else
            break;
    }

    return 0;
}
